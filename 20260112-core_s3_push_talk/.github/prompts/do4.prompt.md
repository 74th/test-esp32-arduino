---
agent: agent
---
src/main.cpp がM5Stack CoreS3からマイクを使ってPCM16bitでデータを読み取ってWebSocketで転送するコードになっている。
server/main.py にPCM16bitを受け取ってwavファイルにするサーバーのコードが実装されている。

なるべくリアルタイムに送受信するようにしたい。

ESP32側は、0.5秒ごとにデータをまとめて送信して。
バッファはリングバッファとして。
ボタンを押したら送信開始、離したら送信終了にして。
やりとりするメッセージには、送信開始、途中、送信終了が分かるようにヘッダを付与して。
サーバー側は、送信終了を受け取ったら、wavファイルに保存するようにして。
